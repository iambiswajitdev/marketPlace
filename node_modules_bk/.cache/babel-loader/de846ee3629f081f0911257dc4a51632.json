{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Button from\"../components/button\";import Logo from\"../assets/images/logo2.png\";import login from\"../assets/images/login.png\";import{useHistory,useLocation}from\"react-router\";import*as appUtils from\"../helpers/appUtils\";import*as API from\"../helpers/api\";import{Link}from\"react-router-dom\";import Input from\"../components/input\";import Lottie from\"react-lottie\";import animationData from\"../components/lottie/success.json\";import{ArrowDownward,RemoveRedEye,VisibilityOff}from\"@material-ui/icons\";//REDUX\nimport{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialFormData={email:\"\",password:\"\",confirmPassword:\"\"};export default function ConfirmPassword(){var defaultOptions={loop:true,autoplay:true,animationData:animationData,rendererSettings:{preserveAspectRatio:\"xMidYMid slice\"}};var dispatch=useDispatch();var history=useHistory();var location=useLocation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),passwordView=_useState2[0],setPasswordView=_useState2[1];//LOADER\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),successMsg=_useState6[0],setSuccessMsg=_useState6[1];//FORM-DATA\nvar _useState7=useState(initialFormData),_useState8=_slicedToArray(_useState7,2),formData=_useState8[0],setFormData=_useState8[1];//ERROR-MSGS\nvar _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),errorConfirmPassword=_useState10[0],setErrorConfirmPassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),errorPassword=_useState12[0],setErrorPassword=_useState12[1];//HANDLE-CHANGE\nvar handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;switch(name){case\"password\":setErrorPassword(\"\");break;default:}setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};//HANDLE-SUBMIT\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var flag,requestObj,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);flag=validate();if(flag){_context.next=5;break;}setLoading(false);return _context.abrupt(\"return\");case 5:_context.prev=5;requestObj={emailId:location.state.email,password:formData.password};_context.next=9;return API.customer_confirm_forgot_password(requestObj);case 9:response=_context.sent;console.log(response);if(response.status===200){setSuccessMsg(true);}if(response.status===401){if(response.data.isActive===0){history.push({pathname:\"/email_verification\",state:{email:formData.email}});}}_context.next=17;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](5);case 17:case\"end\":return _context.stop();}}},_callee,null,[[5,15]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var handleLogin=function handleLogin(){dispatch({type:\"LOGOUT\"});history.push({pathname:\"/login\"});};//VALIDATE-INPUT\nvar validate=function validate(){var confirmPassword=formData.confirmPassword,password=formData.password;var flag=true;var validatePassword=appUtils.validatePass(password);if(validatePassword===1){setErrorPassword({field:\"password\",message:\"\"});if(confirmPassword){if(confirmPassword===password){setErrorConfirmPassword({field:\"confirmPassword\",message:\"\"});}else{setErrorConfirmPassword({field:\"confirmPassword\",message:\"That doesn't look like the same.\"});flag=false;}}else if(confirmPassword.length===0){setErrorConfirmPassword({field:\"confirmPassword\",message:\"You missed a bit! Don't fogot to add your confirm password.\"});flag=false;}}if(!(validatePassword===1)){var msg=\"\";if(validatePassword===0){msg=\"You missed a bit! Don't forget to add your password.\";}else{msg=\"That doesn't look like an email address.\";}setErrorPassword({field:\"password\",message:msg});flag=false;}return flag;};var toggleView=function toggleView(){setPasswordView(!passwordView);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\",style:{backgroundImage:\"url(\".concat(login,\")\")},children:[/*#__PURE__*/_jsx(\"div\",{className:\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\",children:\"Forgot your password? Let's get you a new one\"}),/*#__PURE__*/_jsx(\"div\",{className:\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\",children:successMsg?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-10 py-32 shadow-lg w-full rounded-2xl relative\"// style={{ height: \"calc(100vh - 200px)\" }}\n,children:[/*#__PURE__*/_jsx(Lottie,{options:defaultOptions,height:300,width:300}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-semibold\",children:\"Password Updated\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-base\",children:\"Your password has been changed successfully. Use you new password to login.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2/3 mx-auto mt-2\",children:/*#__PURE__*/_jsxs(Button,{size:\"big\",className:\"w-full relative\",variant:\"primary\",id:\"loginBtn\",onClick:handleLogin,children:[\"Back to login\",/*#__PURE__*/_jsx(\"div\",{className:\"transform -rotate-90 ml-2 loginArrow \",children:/*#__PURE__*/_jsx(ArrowDownward,{className:\"animate-bounce\",fontSize:\"small\"})})]})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-12 shadow-lg w-full rounded-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-5\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"logo\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-center text-2xl mb-5\",children:\"Give us your email and we will send you a verification code\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 relative\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"New Password\",name:\"password\",type:passwordView?\"text\":\"password\",value:formData.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"div\",{className:\"right-3 absolute top-3\",children:/*#__PURE__*/_jsx(\"div\",{onClick:toggleView,children:passwordView?/*#__PURE__*/_jsx(RemoveRedEye,{}):/*#__PURE__*/_jsx(VisibilityOff,{})})}),errorPassword.field===\"password\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorPassword.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"Confirm Password\",name:\"confirmPassword\",value:formData.email,onChange:handleChange}),errorConfirmPassword.field===\"confirmPassword\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorConfirmPassword.message})]}),/*#__PURE__*/_jsxs(Button,{size:\"big\",className:\"w-full relative\",variant:\"primary\",id:\"loginBtn\",onClick:handleSubmit,loading:loading,children:[\"Send me the code\",/*#__PURE__*/_jsx(\"div\",{className:\"transform -rotate-90 ml-2 loginArrow \",children:/*#__PURE__*/_jsx(ArrowDownward,{className:\"animate-bounce\",fontSize:\"small\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"py-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-1\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center sm:text-left whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",className:\"w-4 h-4 inline-block align-text-top\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M10 19l-7-7m0 0l7-7m-7 7h18\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block ml-1\",children:\"Back to Login\"})]})})})})})]})})]});}","map":{"version":3,"sources":["/Users/vaibhav/Desktop/Office/E-commerce/src/pages/confirmPassword.js"],"names":["React","useState","Button","Logo","login","useHistory","useLocation","appUtils","API","Link","Input","Lottie","animationData","ArrowDownward","RemoveRedEye","VisibilityOff","useDispatch","initialFormData","email","password","confirmPassword","ConfirmPassword","defaultOptions","loop","autoplay","rendererSettings","preserveAspectRatio","dispatch","history","location","passwordView","setPasswordView","loading","setLoading","successMsg","setSuccessMsg","formData","setFormData","errorConfirmPassword","setErrorConfirmPassword","errorPassword","setErrorPassword","handleChange","e","target","name","value","handleSubmit","flag","validate","requestObj","emailId","state","customer_confirm_forgot_password","response","console","log","status","data","isActive","push","pathname","handleLogin","type","validatePassword","validatePass","field","message","length","msg","toggleView","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"../components/button\";\nimport Logo from \"../assets/images/logo2.png\";\nimport login from \"../assets/images/login.png\";\nimport { useHistory, useLocation } from \"react-router\";\nimport * as appUtils from \"../helpers/appUtils\";\nimport * as API from \"../helpers/api\";\nimport { Link } from \"react-router-dom\";\nimport Input from \"../components/input\";\nimport Lottie from \"react-lottie\";\nimport animationData from \"../components/lottie/success.json\";\nimport { ArrowDownward, RemoveRedEye, VisibilityOff } from \"@material-ui/icons\";\n\n//REDUX\nimport { useDispatch } from \"react-redux\";\n\nconst initialFormData = {\n  email: \"\",\n  password: \"\",\n  confirmPassword: \"\",\n};\n\nexport default function ConfirmPassword() {\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: animationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n\n  const [passwordView, setPasswordView] = useState(false);\n\n  //LOADER\n  const [loading, setLoading] = useState(false);\n  const [successMsg, setSuccessMsg] = useState(false);\n\n  //FORM-DATA\n  const [formData, setFormData] = useState(initialFormData);\n\n  //ERROR-MSGS\n  const [errorConfirmPassword, setErrorConfirmPassword] = useState(\"\");\n  const [errorPassword, setErrorPassword] = useState(\"\");\n\n  //HANDLE-CHANGE\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    switch (name) {\n      case \"password\":\n        setErrorPassword(\"\");\n        break;\n      default:\n    }\n    setFormData({ ...formData, [name]: value });\n  };\n\n  //HANDLE-SUBMIT\n  const handleSubmit = async () => {\n    setLoading(true);\n    let flag = validate();\n    if (!flag) {\n      setLoading(false);\n      return;\n    }\n    try {\n      const requestObj = {\n        emailId: location.state.email,\n        password: formData.password,\n      };\n      const response = await API.customer_confirm_forgot_password(requestObj);\n      console.log(response);\n      if (response.status === 200) {\n        setSuccessMsg(true);\n      }\n\n      if (response.status === 401) {\n        if (response.data.isActive === 0) {\n          history.push({\n            pathname: \"/email_verification\",\n            state: { email: formData.email },\n          });\n        }\n      }\n    } catch (e) {}\n  };\n\n  const handleLogin = () => {\n    dispatch({\n      type: \"LOGOUT\",\n    });\n    history.push({\n      pathname: \"/login\",\n    });\n  };\n\n  //VALIDATE-INPUT\n  const validate = () => {\n    const { confirmPassword, password } = formData;\n    let flag = true;\n\n    let validatePassword = appUtils.validatePass(password);\n    if (validatePassword === 1) {\n      setErrorPassword({\n        field: \"password\",\n        message: \"\",\n      });\n      if (confirmPassword) {\n        if (confirmPassword === password) {\n          setErrorConfirmPassword({\n            field: \"confirmPassword\",\n            message: \"\",\n          });\n        } else {\n          setErrorConfirmPassword({\n            field: \"confirmPassword\",\n            message: \"That doesn't look like the same.\",\n          });\n          flag = false;\n        }\n      } else if (confirmPassword.length === 0) {\n        setErrorConfirmPassword({\n          field: \"confirmPassword\",\n          message:\n            \"You missed a bit! Don't fogot to add your confirm password.\",\n        });\n        flag = false;\n      }\n    }\n    if (!(validatePassword === 1)) {\n      let msg = \"\";\n      if (validatePassword === 0) {\n        msg = \"You missed a bit! Don't forget to add your password.\";\n      } else {\n        msg = \"That doesn't look like an email address.\";\n      }\n      setErrorPassword({\n        field: \"password\",\n        message: msg,\n      });\n      flag = false;\n    }\n    return flag;\n  };\n\n  const toggleView = () => {\n    setPasswordView(!passwordView);\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\"\n      style={{ backgroundImage: `url(${login})` }}\n    >\n      <div className=\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\">\n        Forgot your password? Let's get you a new one\n      </div>\n      <div className=\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\">\n        {successMsg ? (\n          <div\n            className=\"bg-white p-10 py-32 shadow-lg w-full rounded-2xl relative\"\n            // style={{ height: \"calc(100vh - 200px)\" }}\n          >\n            <Lottie options={defaultOptions} height={300} width={300} />\n            <div className=\"text-center\">\n              <div className=\"text-3xl font-semibold\">Password Updated</div>\n              <div className=\"text-base\">\n                Your password has been changed successfully. Use you new\n                password to login.\n              </div>\n              <div className=\"w-2/3 mx-auto mt-2\">\n                <Button\n                  size={\"big\"}\n                  className=\"w-full relative\"\n                  variant={\"primary\"}\n                  id=\"loginBtn\"\n                  onClick={handleLogin}\n                >\n                  Back to login\n                  <div className=\"transform -rotate-90 ml-2 loginArrow \">\n                    <ArrowDownward\n                      className=\"animate-bounce\"\n                      fontSize={\"small\"}\n                    />\n                  </div>\n                </Button>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"bg-white p-12 shadow-lg w-full rounded-2xl\">\n            <div className=\"flex justify-center py-5\">\n              <img src={Logo} alt=\"logo\" />\n            </div>\n            <h1 className=\"font-bold text-center text-2xl mb-5\">\n              Give us your email and we will send you a verification code\n            </h1>\n            <div className=\"px-5 py-7\">\n              <div className=\"mb-4 relative\">\n                <Input\n                  placeholder=\"New Password\"\n                  name=\"password\"\n                  type={passwordView ? \"text\" : \"password\"}\n                  value={formData.email}\n                  onChange={handleChange}\n                />\n                <div className=\"right-3 absolute top-3\">\n                  <div onClick={toggleView}>\n                    {passwordView ? <RemoveRedEye /> : <VisibilityOff />}\n                  </div>\n                </div>\n                {errorPassword.field === \"password\" && (\n                  <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                    {errorPassword.message}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"mb-4\">\n                <Input\n                  type=\"password\"\n                  placeholder=\"Confirm Password\"\n                  name=\"confirmPassword\"\n                  value={formData.email}\n                  onChange={handleChange}\n                />\n\n                {errorConfirmPassword.field === \"confirmPassword\" && (\n                  <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                    {errorConfirmPassword.message}\n                  </p>\n                )}\n              </div>\n\n              <Button\n                size={\"big\"}\n                className=\"w-full relative\"\n                variant={\"primary\"}\n                id=\"loginBtn\"\n                onClick={handleSubmit}\n                loading={loading}\n              >\n                Send me the code\n                <div className=\"transform -rotate-90 ml-2 loginArrow \">\n                  <ArrowDownward\n                    className=\"animate-bounce\"\n                    fontSize={\"small\"}\n                  />\n                </div>\n              </Button>\n            </div>\n\n            <div className=\"py-2\">\n              <div className=\"grid grid-cols-2 gap-1\">\n                <Link to=\"/login\">\n                  <div className=\"text-center sm:text-left whitespace-nowrap\">\n                    <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                        className=\"w-4 h-4 inline-block align-text-top\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth=\"2\"\n                          d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                        />\n                      </svg>\n                      <span className=\"inline-block ml-1\">Back to Login</span>\n                    </button>\n                  </div>\n                </Link>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}