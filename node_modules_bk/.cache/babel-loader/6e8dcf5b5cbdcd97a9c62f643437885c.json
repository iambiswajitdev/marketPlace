{"ast":null,"code":"var _jsxFileName = \"/Users/vaibhav/Desktop/Office/E-commerce/src/pages/verification.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Button from \"../components/button\";\nimport Logo from \"../assets/images/logo2.png\";\nimport login from \"../assets/images/login.png\";\nimport Timer from \"../components/timer\";\nimport * as API from \"../helpers/api\";\nimport { Link } from \"react-router-dom\";\nimport OtpInput from \"react-otp-input\";\nimport { ArrowDownward } from \"@material-ui/icons\";\nimport { useLocation, useHistory } from \"react-router\"; //REDUX\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  initialSeconds: 10,\n  initialMinute: 0\n};\nexport default function Verification() {\n  _s();\n\n  const history = useHistory();\n  const state = useSelector(state => state.AuthProvider);\n  const counter = useSelector(state => state);\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const [minutes, setMinutes] = useState(0);\n  const [seconds, setSeconds] = useState(10);\n  const [resendOTP, setResendOTP] = useState(false); //USEEFFECTS\n\n  useEffect(() => {\n    let myInterval = setInterval(() => {\n      if (seconds > 0) {\n        setSeconds(seconds - 1);\n      }\n\n      if (seconds === 0) {\n        if (minutes === 0) {\n          clearInterval(myInterval);\n        } else {\n          setMinutes(minutes - 1);\n          setSeconds(59);\n        }\n      }\n    }, 1000);\n    return () => {\n      clearInterval(myInterval);\n    };\n  });\n\n  if (minutes === 0 && seconds === 0) {\n    setResendOTP(true);\n  } //OTP\n\n\n  const [otp, setOtp] = useState(\"\"); //HANDLE_CHANGE\n\n  const handleChange = e => {\n    setOtp(e);\n  }; //LOADER\n\n\n  const [loading, setLoading] = useState(false);\n  const [second, setSecond] = useState(10); //ERROR-MSGS\n\n  const [OTPError, setOTPError] = useState(\"\"); //HANDLE VERIFY\n\n  const handleVerify = async () => {\n    setLoading(true);\n    setOTPError(\"\");\n    const flag = validateInput();\n\n    if (!flag) {\n      return;\n    }\n\n    try {\n      const requestObj = {\n        emailId: location.state.email,\n        verificationCode: otp\n      };\n\n      if (state.isAuthenticated) {\n        const response = await API.customer_email_verification(requestObj);\n\n        if (response.status === 200) {\n          setLoading(false);\n          dispatch({\n            type: \"LOGIN\",\n            payload: {\n              isAuthenticated: true,\n              user: response.data.data,\n              token: response.data.token\n            }\n          });\n          history.push({\n            pathname: \"/welcome\"\n          });\n        }\n      } else {\n        const response = await API.check_password_verified_code(requestObj);\n\n        if (response.status === 200) {\n          setLoading(false);\n          history.push({\n            pathname: \"/confirm-password\",\n            state: {\n              email: location.state.email\n            }\n          });\n        }\n      }\n    } catch (e) {\n      setLoading(false);\n    }\n  }; //HANDLE RESEND OTP\n\n\n  const handleResend = async () => {\n    console.log(\"HIHIHIH\");\n\n    try {\n      const requestObj = {\n        emailId: location.state.email\n      };\n\n      if (counter.counter === false) {\n        const response = await API.resend_verification_code(requestObj); // console.log(response);\n\n        if (response.status === 200) {\n          console.log(\"hi\");\n          dispatch({\n            type: \"COUNTER_RESET\"\n          });\n          setSecond(10);\n        }\n      }\n    } catch (e) {}\n  }; //INPUT VALIDATION\n\n\n  const validateInput = () => {\n    let flag = true;\n\n    if (otp) {\n      if (otp.length === 4) {\n        setOTPError({\n          field: \"\",\n          message: \"\"\n        });\n        flag = true;\n      } else {\n        flag = false;\n        setOTPError({\n          field: \"OTP\",\n          message: \"That doesn't look like an OTP.\"\n        });\n      }\n    } else {\n      flag = false;\n      setOTPError({\n        field: \"OTP\",\n        message: \"You missed a bit! Don't forget to add OTP.\"\n      });\n    }\n\n    return flag;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\",\n    style: {\n      backgroundImage: `url(${login})`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\",\n      children: \"Verify your account to Get access to everything\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-12 shadow-lg w-full rounded-2xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center py-5\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: Logo,\n            alt: \"logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-center text-2xl mb-5\",\n          children: \"Enter verification code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"We have just sent you a verification code to\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: location.state.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-5 py-7\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-7\",\n            children: [/*#__PURE__*/_jsxDEV(OtpInput // value={this.state.otp}\n            , {\n              value: otp,\n              onChange: handleChange,\n              numInputs: 4,\n              separator: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 28\n              }, this),\n              className: \" text-black mx-auto\",\n              inputStyle: `border ${OTPError.field === \"OTP\" ? \"border-red-300\" : \"border-hippie-blue-500\"}  text-5xl mx-2 focus:outline-none`,\n              containerStyle: \" text-center\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this), OTPError.field === \"OTP\" && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"my-1 text-center text-xs text-left text-red-500\",\n              children: OTPError.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            size: \"big\",\n            className: \"w-full relative\",\n            variant: \"primary\",\n            id: \"loginBtn\",\n            onClick: handleVerify,\n            loading: loading,\n            children: [\"Verify\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"transform -rotate-90 ml-2 loginArrow \",\n              children: /*#__PURE__*/_jsxDEV(ArrowDownward, {\n                className: \"animate-bounce\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center sm:text-left whitespace-nowrap\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",\n                onClick: resendOTP ? handleResend : null,\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\",\n                  className: \"w-4 h-4 inline-block align-text-top\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"2\",\n                    d: \"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block ml-1\",\n                  children: [\"Send the code again in\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm text-gray-500\",\n                      children: [minutes, \":\", seconds < 10 ? `0${seconds}` : seconds]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-1\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center sm:text-left whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    className: \"w-4 h-4 inline-block align-text-top\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: \"2\",\n                      d: \"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"inline-block ml-1\",\n                    children: \"Back to Home\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Verification, \"uSVnK1ibKIvE7f2IdmD86RKQ5Cw=\", false, function () {\n  return [useHistory, useSelector, useSelector, useLocation, useDispatch];\n});\n\n_c = Verification;\n\nvar _c;\n\n$RefreshReg$(_c, \"Verification\");","map":{"version":3,"sources":["/Users/vaibhav/Desktop/Office/E-commerce/src/pages/verification.js"],"names":["React","useState","useEffect","Button","Logo","login","Timer","API","Link","OtpInput","ArrowDownward","useLocation","useHistory","useDispatch","useSelector","initialState","initialSeconds","initialMinute","Verification","history","state","AuthProvider","counter","location","dispatch","minutes","setMinutes","seconds","setSeconds","resendOTP","setResendOTP","myInterval","setInterval","clearInterval","otp","setOtp","handleChange","e","loading","setLoading","second","setSecond","OTPError","setOTPError","handleVerify","flag","validateInput","requestObj","emailId","email","verificationCode","isAuthenticated","response","customer_email_verification","status","type","payload","user","data","token","push","pathname","check_password_verified_code","handleResend","console","log","resend_verification_code","length","field","message","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Button from \"../components/button\";\nimport Logo from \"../assets/images/logo2.png\";\nimport login from \"../assets/images/login.png\";\n\nimport Timer from \"../components/timer\";\nimport * as API from \"../helpers/api\";\nimport { Link } from \"react-router-dom\";\nimport OtpInput from \"react-otp-input\";\nimport { ArrowDownward } from \"@material-ui/icons\";\nimport { useLocation, useHistory } from \"react-router\";\n\n//REDUX\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst initialState = {\n  initialSeconds: 10,\n  initialMinute: 0,\n};\nexport default function Verification() {\n  const history = useHistory();\n  const state = useSelector((state) => state.AuthProvider);\n  const counter = useSelector((state) => state);\n  const location = useLocation();\n  const dispatch = useDispatch();\n\n  const [minutes, setMinutes] = useState(0);\n  const [seconds, setSeconds] = useState(10);\n  const [resendOTP, setResendOTP] = useState(false);\n\n  //USEEFFECTS\n  useEffect(() => {\n    let myInterval = setInterval(() => {\n      if (seconds > 0) {\n        setSeconds(seconds - 1);\n      }\n      if (seconds === 0) {\n        if (minutes === 0) {\n          clearInterval(myInterval);\n        } else {\n          setMinutes(minutes - 1);\n          setSeconds(59);\n        }\n      }\n    }, 1000);\n    return () => {\n      clearInterval(myInterval);\n    };\n  });\n\n  if (minutes === 0 && seconds === 0) {\n    setResendOTP(true);\n  }\n\n  //OTP\n  const [otp, setOtp] = useState(\"\");\n\n  //HANDLE_CHANGE\n  const handleChange = (e) => {\n    setOtp(e);\n  };\n\n  //LOADER\n  const [loading, setLoading] = useState(false);\n  const [second, setSecond] = useState(10);\n\n  //ERROR-MSGS\n  const [OTPError, setOTPError] = useState(\"\");\n\n  //HANDLE VERIFY\n  const handleVerify = async () => {\n    setLoading(true);\n    setOTPError(\"\");\n    const flag = validateInput();\n\n    if (!flag) {\n      return;\n    }\n\n    try {\n      const requestObj = {\n        emailId: location.state.email,\n        verificationCode: otp,\n      };\n      if (state.isAuthenticated) {\n        const response = await API.customer_email_verification(requestObj);\n        if (response.status === 200) {\n          setLoading(false);\n          dispatch({\n            type: \"LOGIN\",\n            payload: {\n              isAuthenticated: true,\n              user: response.data.data,\n              token: response.data.token,\n            },\n          });\n\n          history.push({ pathname: \"/welcome\" });\n        }\n      } else {\n        const response = await API.check_password_verified_code(requestObj);\n        if (response.status === 200) {\n          setLoading(false);\n          history.push({\n            pathname: \"/confirm-password\",\n            state: { email: location.state.email },\n          });\n        }\n      }\n    } catch (e) {\n      setLoading(false);\n    }\n  };\n\n  //HANDLE RESEND OTP\n  const handleResend = async () => {\n    console.log(\"HIHIHIH\");\n    try {\n      const requestObj = {\n        emailId: location.state.email,\n      };\n\n      if (counter.counter === false) {\n        const response = await API.resend_verification_code(requestObj);\n        // console.log(response);\n        if (response.status === 200) {\n          console.log(\"hi\");\n          dispatch({\n            type: \"COUNTER_RESET\",\n          });\n          setSecond(10);\n        }\n      }\n    } catch (e) {}\n  };\n\n  //INPUT VALIDATION\n  const validateInput = () => {\n    let flag = true;\n    if (otp) {\n      if (otp.length === 4) {\n        setOTPError({\n          field: \"\",\n          message: \"\",\n        });\n        flag = true;\n      } else {\n        flag = false;\n        setOTPError({\n          field: \"OTP\",\n          message: \"That doesn't look like an OTP.\",\n        });\n      }\n    } else {\n      flag = false;\n      setOTPError({\n        field: \"OTP\",\n        message: \"You missed a bit! Don't forget to add OTP.\",\n      });\n    }\n    return flag;\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\"\n      style={{ backgroundImage: `url(${login})` }}\n    >\n      <div className=\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\">\n        Verify your account to Get access to everything\n      </div>\n      <div className=\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\">\n        <div className=\"bg-white p-12 shadow-lg w-full rounded-2xl\">\n          <div className=\"flex justify-center py-5\">\n            <img src={Logo} alt=\"logo\" />\n          </div>\n\n          <h1 className=\"font-bold text-center text-2xl mb-5\">\n            Enter verification code\n          </h1>\n          <div>\n            We have just sent you a verification code to{\" \"}\n            <span className=\"font-semibold\">{location.state.email}</span>\n          </div>\n          <div className=\"px-5 py-7\">\n            <div className=\"mb-7\">\n              <OtpInput\n                // value={this.state.otp}\n                value={otp}\n                onChange={handleChange}\n                numInputs={4}\n                separator={<span>-</span>}\n                className=\" text-black mx-auto\"\n                inputStyle={`border ${\n                  OTPError.field === \"OTP\"\n                    ? \"border-red-300\"\n                    : \"border-hippie-blue-500\"\n                }  text-5xl mx-2 focus:outline-none`}\n                containerStyle=\" text-center\"\n              />\n              {OTPError.field === \"OTP\" && (\n                <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                  {OTPError.message}\n                </p>\n              )}\n            </div>\n\n            <Button\n              size={\"big\"}\n              className=\"w-full relative\"\n              variant={\"primary\"}\n              id=\"loginBtn\"\n              onClick={handleVerify}\n              loading={loading}\n            >\n              Verify\n              <div className=\"transform -rotate-90 ml-2 loginArrow \">\n                <ArrowDownward className=\"animate-bounce\" fontSize={\"small\"} />\n              </div>\n            </Button>\n          </div>\n          <div className=\"py-2\">\n            <div className=\"grid grid-cols-2 gap-1\">\n              <div className=\"text-center sm:text-left whitespace-nowrap\">\n                <button\n                  className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\"\n                  onClick={resendOTP ? handleResend : null}\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                    className=\"w-4 h-4 inline-block align-text-top\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z\"\n                    />\n                  </svg>\n                  <span className=\"inline-block ml-1\">\n                    Send the code again in{\" \"}\n                    <span>\n                      {/* <Timer minute={0} second={second} /> */}\n\n                      <span className=\"text-sm text-gray-500\">\n                        {minutes}:{seconds < 10 ? `0${seconds}` : seconds}\n                      </span>\n                    </span>\n                  </span>\n                </button>\n              </div>\n              {/* <div className=\"text-center sm:text-right  whitespace-nowrap\">\n                <Link to=\"/register\">\n                  <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                    <CreateOutlined style={{ fontSize: \"15px\" }} />\n                    <span className=\"inline-block ml-1\">Register</span>\n                  </button>\n                </Link>\n              </div> */}\n            </div>\n          </div>\n          <div className=\"py-2\">\n            <div className=\"grid grid-cols-2 gap-1\">\n              <Link to=\"/\">\n                <div className=\"text-center sm:text-left whitespace-nowrap\">\n                  <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                      className=\"w-4 h-4 inline-block align-text-top\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                      />\n                    </svg>\n                    <span className=\"inline-block ml-1\">Back to Home</span>\n                  </button>\n                </div>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}