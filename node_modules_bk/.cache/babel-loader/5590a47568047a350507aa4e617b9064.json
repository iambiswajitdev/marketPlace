{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Button from\"../components/button\";import Logo from\"../assets/images/logo2.png\";import login from\"../assets/images/login.png\";import{useHistory}from\"react-router\";import*as appUtils from\"../helpers/appUtils\";import*as API from\"../helpers/api\";import{Link}from\"react-router-dom\";import Input from\"../components/input\";import{ArrowDownward}from\"@material-ui/icons\";//REDUX\n// import { useSelector, useDispatch } from \"react-redux\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialFormData={email:\"\",password:\"\"};export default function ForgotPassword(){var history=useHistory();//LOADER\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];//FORM-DATA\nvar _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];//ERROR-MSGS\n// const [errorMsg, setErrorMsg] = useState(\"\");\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),errorEmail=_useState6[0],setErrorEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),serverError=_useState8[0],setServerError=_useState8[1];//HANDLE-CHANGE\nvar handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;switch(name){case\"email\":setErrorEmail(\"\");// setErrorMsg(false);\nbreak;default:}setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};//HANDLE-SUBMIT\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var flag,requestObj,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);flag=validate();if(flag){_context.next=5;break;}setLoading(false);return _context.abrupt(\"return\");case 5:_context.prev=5;requestObj={emailId:formData.email};console.log(requestObj);_context.next=10;return API.customer_forgot_password(requestObj);case 10:response=_context.sent;if(response.status===200){history.push({pathname:\"/email_verification\",state:{email:formData.email}});// dispatch({\n//   type: \"LOGIN\",\n//   payload: {\n//     isAuthenticated: true,\n//     user: response.data.data,\n//     token: response.data.token,\n//   },\n// });\n}if(response.status===401){if(response.data.isActive===0){history.push({pathname:\"/email_verification\",state:{email:formData.email}});}}_context.next=20;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](5);setLoading(false);setServerError(\"Internet Error!\");console.log(\"server error\");case 20:case\"end\":return _context.stop();}}},_callee,null,[[5,15]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();//VALIDATE-INPUT\nvar validate=function validate(){var email=formData.email;var flag=true;var validateEmail=appUtils.validateEmail(email);if(validateEmail===1){setErrorEmail({field:\"email\",message:\"\"});}if(!(validateEmail===1)){var msg=\"\";if(validateEmail===0){msg=\"You missed a bit! Don't forget to add your email address.\";}else{msg=\"That doesn't look like an email address.\";}setErrorEmail({field:\"email\",message:msg});flag=false;}return flag;};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\",style:{backgroundImage:\"url(\".concat(login,\")\")},children:[/*#__PURE__*/_jsx(\"div\",{className:\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\",children:\"Forgot your password? Let's get you a new one\"}),/*#__PURE__*/_jsx(\"div\",{className:\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-12 shadow-lg w-full rounded-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-5\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"logo\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-center text-2xl mb-5\",children:\"Give us your email and we will send you a verification code\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Email\",name:\"email\",value:formData.email,onChange:handleChange}),errorEmail.field===\"email\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorEmail.message})]}),/*#__PURE__*/_jsxs(Button,{size:\"big\",className:\"w-full relative\",variant:\"primary\",id:\"loginBtn\",onClick:handleSubmit,loading:loading,children:[\"Send me the code\",/*#__PURE__*/_jsx(\"div\",{className:\"transform -rotate-90 ml-2 loginArrow \",children:/*#__PURE__*/_jsx(ArrowDownward,{className:\"animate-bounce\",fontSize:\"small\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-sm text-red-500 mt-2\",children:serverError})]}),/*#__PURE__*/_jsx(\"div\",{className:\"py-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-1\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center sm:text-left whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",className:\"w-4 h-4 inline-block align-text-top\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M10 19l-7-7m0 0l7-7m-7 7h18\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block ml-1\",children:\"Back to Login\"})]})})})})})]})})]});}","map":{"version":3,"sources":["/Users/vaibhav/Desktop/Office/E-commerce/src/pages/forgotPassword.js"],"names":["React","useState","Button","Logo","login","useHistory","appUtils","API","Link","Input","ArrowDownward","initialFormData","email","password","ForgotPassword","history","loading","setLoading","formData","setFormData","errorEmail","setErrorEmail","serverError","setServerError","handleChange","e","target","name","value","handleSubmit","flag","validate","requestObj","emailId","console","log","customer_forgot_password","response","status","push","pathname","state","data","isActive","validateEmail","field","message","msg","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"../components/button\";\nimport Logo from \"../assets/images/logo2.png\";\nimport login from \"../assets/images/login.png\";\nimport { useHistory } from \"react-router\";\nimport * as appUtils from \"../helpers/appUtils\";\nimport * as API from \"../helpers/api\";\nimport { Link } from \"react-router-dom\";\nimport Input from \"../components/input\";\nimport { ArrowDownward } from \"@material-ui/icons\";\n\n//REDUX\n// import { useSelector, useDispatch } from \"react-redux\";\n\nconst initialFormData = {\n  email: \"\",\n  password: \"\",\n};\n\nexport default function ForgotPassword() {\n  const history = useHistory();\n\n  //LOADER\n  const [loading, setLoading] = useState(false);\n\n  //FORM-DATA\n  const [formData, setFormData] = useState(initialFormData);\n\n  //ERROR-MSGS\n  // const [errorMsg, setErrorMsg] = useState(\"\");\n  const [errorEmail, setErrorEmail] = useState(\"\");\n  const [serverError, setServerError] = useState(\"\");\n\n  //HANDLE-CHANGE\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    switch (name) {\n      case \"email\":\n        setErrorEmail(\"\");\n        // setErrorMsg(false);\n        break;\n      default:\n    }\n    setFormData({ ...formData, [name]: value });\n  };\n\n  //HANDLE-SUBMIT\n  const handleSubmit = async () => {\n    setLoading(true);\n    let flag = validate();\n    if (!flag) {\n      setLoading(false);\n      return;\n    }\n    try {\n      const requestObj = {\n        emailId: formData.email,\n      };\n\n      console.log(requestObj);\n      const response = await API.customer_forgot_password(requestObj);\n\n      if (response.status === 200) {\n        history.push({\n          pathname: \"/email_verification\",\n          state: { email: formData.email },\n        });\n\n        // dispatch({\n        //   type: \"LOGIN\",\n        //   payload: {\n        //     isAuthenticated: true,\n        //     user: response.data.data,\n        //     token: response.data.token,\n        //   },\n        // });\n      }\n\n      if (response.status === 401) {\n        if (response.data.isActive === 0) {\n          history.push({\n            pathname: \"/email_verification\",\n            state: { email: formData.email },\n          });\n        }\n      }\n    } catch (e) {\n      setLoading(false);\n      setServerError(\"Internet Error!\");\n      console.log(\"server error\");\n    }\n  };\n\n  //VALIDATE-INPUT\n  const validate = () => {\n    const { email } = formData;\n    let flag = true;\n\n    let validateEmail = appUtils.validateEmail(email);\n    if (validateEmail === 1) {\n      setErrorEmail({\n        field: \"email\",\n        message: \"\",\n      });\n    }\n    if (!(validateEmail === 1)) {\n      let msg = \"\";\n      if (validateEmail === 0) {\n        msg = \"You missed a bit! Don't forget to add your email address.\";\n      } else {\n        msg = \"That doesn't look like an email address.\";\n      }\n      setErrorEmail({\n        field: \"email\",\n        message: msg,\n      });\n      flag = false;\n    }\n    return flag;\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\"\n      style={{ backgroundImage: `url(${login})` }}\n    >\n      <div className=\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\">\n        Forgot your password? Let's get you a new one\n      </div>\n      <div className=\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\">\n        <div className=\"bg-white p-12 shadow-lg w-full rounded-2xl\">\n          <div className=\"flex justify-center py-5\">\n            <img src={Logo} alt=\"logo\" />\n          </div>\n          <h1 className=\"font-bold text-center text-2xl mb-5\">\n            Give us your email and we will send you a verification code\n          </h1>\n          <div className=\"px-5 py-7\">\n            <div className=\"mb-4\">\n              <Input\n                placeholder=\"Email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n              />\n              {errorEmail.field === \"email\" && (\n                <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                  {errorEmail.message}\n                </p>\n              )}\n            </div>\n\n            <Button\n              size={\"big\"}\n              className=\"w-full relative\"\n              variant={\"primary\"}\n              id=\"loginBtn\"\n              onClick={handleSubmit}\n              loading={loading}\n            >\n              Send me the code\n              <div className=\"transform -rotate-90 ml-2 loginArrow \">\n                <ArrowDownward className=\"animate-bounce\" fontSize={\"small\"} />\n              </div>\n            </Button>\n            <div className=\"text-center text-sm text-red-500 mt-2\">\n              {serverError}\n            </div>\n          </div>\n\n          <div className=\"py-2\">\n            <div className=\"grid grid-cols-2 gap-1\">\n              <Link to=\"/login\">\n                <div className=\"text-center sm:text-left whitespace-nowrap\">\n                  <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                      className=\"w-4 h-4 inline-block align-text-top\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                      />\n                    </svg>\n                    <span className=\"inline-block ml-1\">Back to Login</span>\n                  </button>\n                </div>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}