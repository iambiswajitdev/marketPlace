{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Button from\"../components/button\";import Logo from\"../assets/images/logo2.png\";import login from\"../assets/images/login.png\";import NumberFormat from\"react-number-format\";import{useHistory}from\"react-router\";import*as API from\"../helpers/api\";import*as appUtils from\"../helpers/appUtils\";import{Link}from\"react-router-dom\";import Input from\"../components/input\";import{ArrowDownward,PersonOutline}from\"@material-ui/icons\";//REDUX\nimport{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialFormData={email:\"\",password:\"\",name:\"\",phone:\"\"};export default function Register(){var dispatch=useDispatch();var history=useHistory();//LOADER\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];//FORM-DATA\nvar _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];//ERROR-MSGS\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),errorMsg=_useState6[0],setErrorMsg=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errorEmail=_useState8[0],setErrorEmail=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),errorName=_useState10[0],setErrorName=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),errorPassword=_useState12[0],setErrorPassword=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),errorPhone=_useState14[0],setErrorPhone=_useState14[1];// HANDLE-CHANGE\nvar handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;switch(name){case\"email\":setErrorEmail(\"\");setErrorMsg(false);break;case\"name\":setErrorName(\"\");break;case\"password\":setErrorPassword(\"\");break;case\"phone\":setErrorPhone(\"\");break;default:}setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};// HANDLE-SUBMIT\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var flag,requestObj,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);flag=validate();if(flag){_context.next=5;break;}setLoading(false);return _context.abrupt(\"return\");case 5:_context.prev=5;requestObj={emailId:formData.email,password:formData.password,customerName:formData.name,mobileNo:formData.phone};_context.next=9;return API.register_customer(requestObj);case 9:response=_context.sent;if(response.status===200){setLoading(false);dispatch({type:\"LOGIN\",payload:{isAuthenticated:true// user: response.data.data,\n// token: response.data.token,\n}});history.push({pathname:\"/email_verification\",state:{email:formData.email}});localStorage.setItem(\"token\",response.data.token);}if(response.status===409){setLoading(false);setErrorMsg(true);}_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](5);case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,14]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();//VALIDATE-INPUT\nvar validate=function validate(){var email=formData.email,password=formData.password,name=formData.name,phone=formData.phone;var flag=true;var validatePhone=appUtils.validatePhoneNumber(phone);if(validatePhone===1){setErrorPhone({field:\"phone\",message:\"\"});}if(!(validatePhone===1)){var msg=\"\";if(validatePhone===0){msg=\"You missed a bit! Don't forget to add your phone number.\";}else{msg=\"That doesn't look like a phone number.\";}setErrorPhone({field:\"phone\",message:msg});flag=false;}var validateEmail=appUtils.validateEmail(email);if(validateEmail===1){setErrorEmail({field:\"email\",message:\"\"});}if(!(validateEmail===1)){var _msg=\"\";if(validateEmail===0){_msg=\"You missed a bit! Don't forget to add your email address.\";}else{_msg=\"That doesn't look like an email address.\";}setErrorEmail({field:\"email\",message:_msg});flag=false;}var validateName=appUtils.validateName(name);if(validateName===1){setErrorName({field:\"name\",message:\"\"});}if(!(validateName===1)){var _msg2=\"\";if(validateName===0){_msg2=\"You missed a bit! Don't forget to add your name.\";}else{_msg2=\"That doesn't look like a name.\";}setErrorName({field:\"name\",message:_msg2});flag=false;}if(password){if(password.length<8){setErrorPassword({field:\"password\",message:\"Your password is too short. It needs to be 8+ characters\"});flag=false;}if(password.length>8){setErrorPassword({field:\"password\",message:\"\"});flag=true;}}else{setErrorPassword({field:\"password\",message:\"You missed a bit! Don't forget to add your password.\"});flag=false;}return flag;};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\",style:{backgroundImage:\"url(\".concat(login,\")\")},children:[/*#__PURE__*/_jsx(\"div\",{className:\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\",children:\"Sign Up to start shopping\"}),/*#__PURE__*/_jsx(\"div\",{className:\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-10 shadow-lg w-full rounded-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-5\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"logo\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-center text-2xl mb-5\",children:\"Welcome to Market Place\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-4\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Name\",className:\"\",name:\"name\",value:formData.name,onChange:handleChange}),errorName.field===\"name\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorName.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-4\",children:[/*#__PURE__*/_jsx(NumberFormat,{format:\"##########\",name:\"phone\",id:\"phoneNumber\",placeholder:\"Phone\",className:\"h-12 px-4 bg-gray-200 w-full h-12 placeholder-gray-500 border border-transparent rounded outline-none transition duration-200 text-gray-900 bg-gray-f7 focus:placeholder-gray-900\",onChange:handleChange,autoComplete:\"off\"}),errorPhone.field===\"phone\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorPhone.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-4\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Email\",name:\"email\",value:formData.email,onChange:handleChange}),errorEmail.field===\"email\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorEmail.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-4\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Password\",name:\"password\",type:\"password\",value:formData.password,onChange:handleChange}),errorPassword.field===\"password\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorPassword.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(Button,{size:\"big\",className:\"w-full relative\",variant:\"primary\",id:\"loginBtn\",onClick:handleSubmit,loading:loading,children:[\"Register\",/*#__PURE__*/_jsx(\"div\",{className:\"transform -rotate-90 ml-2 loginArrow \",children:/*#__PURE__*/_jsx(ArrowDownward,{className:\"animate-bounce\",fontSize:\"small\"})})]}),errorMsg&&/*#__PURE__*/_jsxs(\"span\",{className:\"absolute text-xs text-center text-red-500 -bottom-10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:formData.email}),\" is already taken. Please use a different email id\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"py-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center sm:text-left whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",className:\"w-4 h-4 inline-block align-text-top\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block ml-1\",children:\"Forgot Password\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center sm:text-right  whitespace-nowrap\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",children:[/*#__PURE__*/_jsx(PersonOutline,{style:{fontSize:\"20px\"}}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block ml-1\",children:\"Login\"})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"py-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-1\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center sm:text-left whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",className:\"w-4 h-4 inline-block align-text-top\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M10 19l-7-7m0 0l7-7m-7 7h18\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block ml-1\",children:\"Back to Home\"})]})})})})})]})})]});}","map":{"version":3,"sources":["/Users/vaibhav/Desktop/Office/E-commerce/src/pages/register.js"],"names":["React","useState","Button","Logo","login","NumberFormat","useHistory","API","appUtils","Link","Input","ArrowDownward","PersonOutline","useDispatch","initialFormData","email","password","name","phone","Register","dispatch","history","loading","setLoading","formData","setFormData","errorMsg","setErrorMsg","errorEmail","setErrorEmail","errorName","setErrorName","errorPassword","setErrorPassword","errorPhone","setErrorPhone","handleChange","e","target","value","handleSubmit","flag","validate","requestObj","emailId","customerName","mobileNo","register_customer","response","status","type","payload","isAuthenticated","push","pathname","state","localStorage","setItem","data","token","validatePhone","validatePhoneNumber","field","message","msg","validateEmail","validateName","length","backgroundImage","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"../components/button\";\nimport Logo from \"../assets/images/logo2.png\";\nimport login from \"../assets/images/login.png\";\nimport NumberFormat from \"react-number-format\";\n\nimport { useHistory } from \"react-router\";\nimport * as API from \"../helpers/api\";\nimport * as appUtils from \"../helpers/appUtils\";\nimport { Link } from \"react-router-dom\";\nimport Input from \"../components/input\";\nimport { ArrowDownward, PersonOutline } from \"@material-ui/icons\";\n\n//REDUX\nimport { useDispatch } from \"react-redux\";\n\nconst initialFormData = {\n  email: \"\",\n  password: \"\",\n  name: \"\",\n  phone: \"\",\n};\n\nexport default function Register() {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  //LOADER\n  const [loading, setLoading] = useState(false);\n\n  //FORM-DATA\n  const [formData, setFormData] = useState(initialFormData);\n\n  //ERROR-MSGS\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [errorEmail, setErrorEmail] = useState(\"\");\n  const [errorName, setErrorName] = useState(\"\");\n  const [errorPassword, setErrorPassword] = useState(\"\");\n  const [errorPhone, setErrorPhone] = useState(\"\");\n\n  // HANDLE-CHANGE\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    switch (name) {\n      case \"email\":\n        setErrorEmail(\"\");\n        setErrorMsg(false);\n        break;\n      case \"name\":\n        setErrorName(\"\");\n        break;\n      case \"password\":\n        setErrorPassword(\"\");\n        break;\n      case \"phone\":\n        setErrorPhone(\"\");\n        break;\n      default:\n    }\n    setFormData({ ...formData, [name]: value });\n  };\n\n  // HANDLE-SUBMIT\n  const handleSubmit = async () => {\n    setLoading(true);\n    let flag = validate();\n\n    if (!flag) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const requestObj = {\n        emailId: formData.email,\n        password: formData.password,\n        customerName: formData.name,\n        mobileNo: formData.phone,\n      };\n\n      const response = await API.register_customer(requestObj);\n\n      if (response.status === 200) {\n        setLoading(false);\n        dispatch({\n          type: \"LOGIN\",\n          payload: {\n            isAuthenticated: true,\n            // user: response.data.data,\n            // token: response.data.token,\n          },\n        });\n\n        history.push({\n          pathname: \"/email_verification\",\n          state: { email: formData.email },\n        });\n\n        localStorage.setItem(\"token\", response.data.token);\n      }\n\n      if (response.status === 409) {\n        setLoading(false);\n        setErrorMsg(true);\n      }\n    } catch (e) {}\n  };\n\n  //VALIDATE-INPUT\n  const validate = () => {\n    const { email, password, name, phone } = formData;\n    let flag = true;\n\n    let validatePhone = appUtils.validatePhoneNumber(phone);\n    if (validatePhone === 1) {\n      setErrorPhone({\n        field: \"phone\",\n        message: \"\",\n      });\n    }\n    if (!(validatePhone === 1)) {\n      let msg = \"\";\n      if (validatePhone === 0) {\n        msg = \"You missed a bit! Don't forget to add your phone number.\";\n      } else {\n        msg = \"That doesn't look like a phone number.\";\n      }\n      setErrorPhone({\n        field: \"phone\",\n        message: msg,\n      });\n      flag = false;\n    }\n\n    let validateEmail = appUtils.validateEmail(email);\n    if (validateEmail === 1) {\n      setErrorEmail({\n        field: \"email\",\n        message: \"\",\n      });\n    }\n    if (!(validateEmail === 1)) {\n      let msg = \"\";\n      if (validateEmail === 0) {\n        msg = \"You missed a bit! Don't forget to add your email address.\";\n      } else {\n        msg = \"That doesn't look like an email address.\";\n      }\n      setErrorEmail({\n        field: \"email\",\n        message: msg,\n      });\n      flag = false;\n    }\n\n    let validateName = appUtils.validateName(name);\n    if (validateName === 1) {\n      setErrorName({\n        field: \"name\",\n        message: \"\",\n      });\n    }\n    if (!(validateName === 1)) {\n      let msg = \"\";\n      if (validateName === 0) {\n        msg = \"You missed a bit! Don't forget to add your name.\";\n      } else {\n        msg = \"That doesn't look like a name.\";\n      }\n      setErrorName({\n        field: \"name\",\n        message: msg,\n      });\n      flag = false;\n    }\n\n    if (password) {\n      if (password.length < 8) {\n        setErrorPassword({\n          field: \"password\",\n          message: \"Your password is too short. It needs to be 8+ characters\",\n        });\n        flag = false;\n      }\n      if (password.length > 8) {\n        setErrorPassword({\n          field: \"password\",\n          message: \"\",\n        });\n        flag = true;\n      }\n    } else {\n      setErrorPassword({\n        field: \"password\",\n        message: \"You missed a bit! Don't forget to add your password.\",\n      });\n      flag = false;\n    }\n\n    return flag;\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\"\n      style={{ backgroundImage: `url(${login})` }}\n    >\n      <div className=\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\">\n        Sign Up to start shopping\n      </div>\n      <div className=\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\">\n        <div className=\"bg-white p-10 shadow-lg w-full rounded-2xl\">\n          <div className=\"flex justify-center py-5\">\n            <img src={Logo} alt=\"logo\" />\n          </div>\n          <h1 className=\"font-bold text-center text-2xl mb-5\">\n            Welcome to Market Place\n          </h1>\n          <div className=\"px-5 py-7\">\n            {/* NAME */}\n            <div className=\"relative mb-4\">\n              <Input\n                placeholder=\"Name\"\n                className=\"\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n              />\n              {errorName.field === \"name\" && (\n                <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                  {errorName.message}\n                </p>\n              )}\n            </div>\n\n            {/* PHONE NUMBER */}\n            <div className=\"relative mb-4\">\n              <NumberFormat\n                format=\"##########\"\n                name=\"phone\"\n                id=\"phoneNumber\"\n                placeholder=\"Phone\"\n                className=\"h-12 px-4 bg-gray-200 w-full h-12 placeholder-gray-500 border border-transparent rounded outline-none transition duration-200 text-gray-900 bg-gray-f7 focus:placeholder-gray-900\"\n                onChange={handleChange}\n                autoComplete=\"off\"\n              />\n              {errorPhone.field === \"phone\" && (\n                <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                  {errorPhone.message}\n                </p>\n              )}\n            </div>\n\n            {/* EMAIL */}\n            <div className=\"relative mb-4\">\n              <Input\n                placeholder=\"Email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n              />\n              {errorEmail.field === \"email\" && (\n                <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                  {errorEmail.message}\n                </p>\n              )}\n            </div>\n\n            {/* PASSWORD */}\n            <div className=\"relative mb-4\">\n              <Input\n                placeholder=\"Password\"\n                name=\"password\"\n                type=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n              />\n              {errorPassword.field === \"password\" && (\n                <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                  {errorPassword.message}\n                </p>\n              )}\n            </div>\n\n            <div className=\"relative\">\n              <Button\n                size={\"big\"}\n                className=\"w-full relative\"\n                variant={\"primary\"}\n                id=\"loginBtn\"\n                onClick={handleSubmit}\n                loading={loading}\n              >\n                Register\n                <div className=\"transform -rotate-90 ml-2 loginArrow \">\n                  <ArrowDownward\n                    className=\"animate-bounce\"\n                    fontSize={\"small\"}\n                  />\n                </div>\n              </Button>\n              {errorMsg && (\n                <span className=\"absolute text-xs text-center text-red-500 -bottom-10\">\n                  <span className=\"font-semibold\">{formData.email}</span> is\n                  already taken. Please use a different email id\n                </span>\n              )}\n            </div>\n          </div>\n          <div className=\"py-2\">\n            <div className=\"grid grid-cols-2 gap-1\">\n              <div className=\"text-center sm:text-left whitespace-nowrap\">\n                <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                    className=\"w-4 h-4 inline-block align-text-top\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z\"\n                    />\n                  </svg>\n                  <span className=\"inline-block ml-1\">Forgot Password</span>\n                </button>\n              </div>\n              <div className=\"text-center sm:text-right  whitespace-nowrap\">\n                <Link to=\"/login\">\n                  <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                    <PersonOutline style={{ fontSize: \"20px\" }} />\n                    <span className=\"inline-block ml-1\">Login</span>\n                  </button>\n                </Link>\n              </div>\n            </div>\n          </div>\n          <div className=\"py-2\">\n            <div className=\"grid grid-cols-2 gap-1\">\n              <Link to=\"/\">\n                <div className=\"text-center sm:text-left whitespace-nowrap\">\n                  <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                      className=\"w-4 h-4 inline-block align-text-top\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                      />\n                    </svg>\n                    <span className=\"inline-block ml-1\">Back to Home</span>\n                  </button>\n                </div>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}