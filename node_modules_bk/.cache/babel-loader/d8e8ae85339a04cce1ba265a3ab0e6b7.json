{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/vaibhav/Desktop/Office/E-commerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Button from\"../components/button\";import Logo from\"../assets/images/logo2.png\";import login from\"../assets/images/login.png\";import{useHistory}from\"react-router\";import*as appUtils from\"../helpers/appUtils\";import*as API from\"../helpers/api\";import{Link}from\"react-router-dom\";import Input from\"../components/input\";import{ArrowDownward,CreateOutlined}from\"@material-ui/icons\";//REDUX\nimport{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialFormData={email:\"\",password:\"\"};export default function Login(){// const user = useSelector((state) => state.AuthProvider);\nvar dispatch=useDispatch();var history=useHistory();//LOADER\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];//FORM-DATA\nvar _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];//ERROR-MSGS\n// const [errorMsg, setErrorMsg] = useState(\"\");\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),serverMsg=_useState6[0],setServerMsg=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errorEmail=_useState8[0],setErrorEmail=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),errorPassword=_useState10[0],setErrorPassword=_useState10[1];//HANDLE-CHANGE\nvar handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;switch(name){case\"email\":setErrorEmail(\"\");// setErrorMsg(false);\nbreak;case\"password\":setErrorPassword(\"\");break;default:}setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};//HANDLE-SUBMIT\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var flag,requestObj,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);setServerMsg(\"\");flag=validate();if(flag){_context.next=6;break;}setLoading(false);return _context.abrupt(\"return\");case 6:_context.prev=6;requestObj={emailId:formData.email,password:formData.password};console.log(requestObj);_context.next=11;return API.login_customer(requestObj);case 11:response=_context.sent;console.log(response);if(response.status===200){dispatch({type:\"LOGIN\",payload:{isAuthenticated:true,user:response.data.data,token:response.data.token}});history.push({pathname:\"/\"});}if(response.status===401){setLoading(false);if(response.data.isActive===0){dispatch({type:\"LOGIN\",payload:{isAuthenticated:true}});history.push({pathname:\"/email_verification\",state:{email:formData.email}});}else{// setErrorMsg(\"\");\nsetServerMsg(response.data.message);}}_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](6);setLoading(false);case 20:case\"end\":return _context.stop();}}},_callee,null,[[6,17]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();//VALIDATE-INPUT\nvar validate=function validate(){var email=formData.email,password=formData.password;var flag=true;var validateEmail=appUtils.validateEmail(email);if(validateEmail===1){setErrorEmail({field:\"email\",message:\"\"});}if(!(validateEmail===1)){var msg=\"\";if(validateEmail===0){msg=\"You missed a bit! Don't forget to add your email address.\";}else{msg=\"That doesn't look like an email address.\";}setErrorEmail({field:\"email\",message:msg});flag=false;}if(password){if(password.length>8){setErrorPassword({field:\"password\",message:\"\"});flag=true;}}else{setErrorPassword({field:\"password\",message:\"You missed a bit! Don't forget to add your password.\"});flag=false;}return flag;};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\",style:{backgroundImage:\"url(\".concat(login,\")\")},children:[/*#__PURE__*/_jsx(\"div\",{className:\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\",children:\"Sign In to start shopping\"}),/*#__PURE__*/_jsx(\"div\",{className:\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-12 shadow-lg w-full rounded-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-5\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"logo\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-center text-2xl mb-5\",children:\"Welcome to Market Place\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Email\",name:\"email\",value:formData.email,onChange:handleChange}),errorEmail.field===\"email\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorEmail.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Password\",name:\"password\",type:\"password\",value:formData.password,onChange:handleChange}),errorPassword.field===\"password\"&&/*#__PURE__*/_jsx(\"p\",{className:\"my-1 text-center text-xs text-left text-red-500\",children:errorPassword.message})]}),/*#__PURE__*/_jsxs(Button,{size:\"big\",className:\"w-full relative\",variant:\"primary\",id:\"loginBtn\",onClick:handleSubmit,loading:loading,children:[\"Login\",/*#__PURE__*/_jsx(\"div\",{className:\"transform -rotate-90 ml-2 loginArrow \",children:/*#__PURE__*/_jsx(ArrowDownward,{className:\"animate-bounce\",fontSize:\"small\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-sm text-red-500 mt-2\",children:serverMsg})]}),/*#__PURE__*/_jsx(\"div\",{className:\"py-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center sm:text-left whitespace-nowrap\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",className:\"w-4 h-4 inline-block align-text-top\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block ml-1\",children:\"Forgot Password\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center sm:text-right  whitespace-nowrap\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",children:[/*#__PURE__*/_jsx(CreateOutlined,{style:{fontSize:\"15px\"}}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block ml-1\",children:\"Register\"})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"py-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-1\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center sm:text-left whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",className:\"w-4 h-4 inline-block align-text-top\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M10 19l-7-7m0 0l7-7m-7 7h18\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block ml-1\",children:\"Back to Home\"})]})})})})})]})})]});}","map":{"version":3,"sources":["/Users/vaibhav/Desktop/Office/E-commerce/src/pages/login.js"],"names":["React","useState","Button","Logo","login","useHistory","appUtils","API","Link","Input","ArrowDownward","CreateOutlined","useDispatch","initialFormData","email","password","Login","dispatch","history","loading","setLoading","formData","setFormData","serverMsg","setServerMsg","errorEmail","setErrorEmail","errorPassword","setErrorPassword","handleChange","e","target","name","value","handleSubmit","flag","validate","requestObj","emailId","console","log","login_customer","response","status","type","payload","isAuthenticated","user","data","token","push","pathname","isActive","state","message","validateEmail","field","msg","length","backgroundImage","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"../components/button\";\nimport Logo from \"../assets/images/logo2.png\";\nimport login from \"../assets/images/login.png\";\nimport { useHistory } from \"react-router\";\nimport * as appUtils from \"../helpers/appUtils\";\nimport * as API from \"../helpers/api\";\nimport { Link } from \"react-router-dom\";\nimport Input from \"../components/input\";\nimport { ArrowDownward, CreateOutlined } from \"@material-ui/icons\";\n\n//REDUX\nimport { useDispatch } from \"react-redux\";\n\nconst initialFormData = {\n  email: \"\",\n  password: \"\",\n};\n\nexport default function Login() {\n  // const user = useSelector((state) => state.AuthProvider);\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  //LOADER\n  const [loading, setLoading] = useState(false);\n\n  //FORM-DATA\n  const [formData, setFormData] = useState(initialFormData);\n\n  //ERROR-MSGS\n  // const [errorMsg, setErrorMsg] = useState(\"\");\n  const [serverMsg, setServerMsg] = useState(\"\");\n  const [errorEmail, setErrorEmail] = useState(\"\");\n  const [errorPassword, setErrorPassword] = useState(\"\");\n\n  //HANDLE-CHANGE\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    switch (name) {\n      case \"email\":\n        setErrorEmail(\"\");\n        // setErrorMsg(false);\n        break;\n      case \"password\":\n        setErrorPassword(\"\");\n        break;\n      default:\n    }\n    setFormData({ ...formData, [name]: value });\n  };\n\n  //HANDLE-SUBMIT\n  const handleSubmit = async () => {\n    setLoading(true);\n    setServerMsg(\"\");\n    let flag = validate();\n    if (!flag) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const requestObj = {\n        emailId: formData.email,\n        password: formData.password,\n      };\n      console.log(requestObj);\n      const response = await API.login_customer(requestObj);\n\n      console.log(response);\n\n      if (response.status === 200) {\n        dispatch({\n          type: \"LOGIN\",\n          payload: {\n            isAuthenticated: true,\n            user: response.data.data,\n            token: response.data.token,\n          },\n        });\n        history.push({ pathname: \"/\" });\n      }\n\n      if (response.status === 401) {\n        setLoading(false);\n        if (response.data.isActive === 0) {\n          dispatch({\n            type: \"LOGIN\",\n            payload: {\n              isAuthenticated: true,\n            },\n          });\n          history.push({\n            pathname: \"/email_verification\",\n            state: { email: formData.email },\n          });\n        } else {\n          // setErrorMsg(\"\");\n          setServerMsg(response.data.message);\n        }\n      }\n    } catch (e) {\n      setLoading(false);\n    }\n  };\n\n  //VALIDATE-INPUT\n  const validate = () => {\n    const { email, password } = formData;\n    let flag = true;\n\n    let validateEmail = appUtils.validateEmail(email);\n    if (validateEmail === 1) {\n      setErrorEmail({\n        field: \"email\",\n        message: \"\",\n      });\n    }\n    if (!(validateEmail === 1)) {\n      let msg = \"\";\n      if (validateEmail === 0) {\n        msg = \"You missed a bit! Don't forget to add your email address.\";\n      } else {\n        msg = \"That doesn't look like an email address.\";\n      }\n      setErrorEmail({\n        field: \"email\",\n        message: msg,\n      });\n      flag = false;\n    }\n\n    if (password) {\n      if (password.length > 8) {\n        setErrorPassword({\n          field: \"password\",\n          message: \"\",\n        });\n        flag = true;\n      }\n    } else {\n      setErrorPassword({\n        field: \"password\",\n        message: \"You missed a bit! Don't forget to add your password.\",\n      });\n      flag = false;\n    }\n\n    return flag;\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex flex-col justify-center sm:py-12 bg-cover bg-center bg-no-repeat\"\n      style={{ backgroundImage: `url(${login})` }}\n    >\n      <div className=\" absolute text-7xl font-bold capitalize text-white top-24 w-2/5 left-24\">\n        Sign In to start shopping\n      </div>\n      <div className=\" mr-24 xs:p-0 ml-auto md:w-full md:max-w-md\">\n        <div className=\"bg-white p-12 shadow-lg w-full rounded-2xl\">\n          <div className=\"flex justify-center py-5\">\n            <img src={Logo} alt=\"logo\" />\n          </div>\n          <h1 className=\"font-bold text-center text-2xl mb-5\">\n            Welcome to Market Place\n          </h1>\n          <div className=\"px-5 py-7\">\n            <div className=\"mb-4\">\n              <Input\n                placeholder=\"Email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n              />\n              {errorEmail.field === \"email\" && (\n                <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                  {errorEmail.message}\n                </p>\n              )}\n            </div>\n\n            <div className=\"mb-4\">\n              <Input\n                placeholder=\"Password\"\n                name=\"password\"\n                type=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n              />\n              {errorPassword.field === \"password\" && (\n                <p className=\"my-1 text-center text-xs text-left text-red-500\">\n                  {errorPassword.message}\n                </p>\n              )}\n            </div>\n\n            <Button\n              size={\"big\"}\n              className=\"w-full relative\"\n              variant={\"primary\"}\n              id=\"loginBtn\"\n              onClick={handleSubmit}\n              loading={loading}\n            >\n              Login\n              <div className=\"transform -rotate-90 ml-2 loginArrow \">\n                <ArrowDownward className=\"animate-bounce\" fontSize={\"small\"} />\n              </div>\n            </Button>\n            <div className=\"text-center text-sm text-red-500 mt-2\">\n              {serverMsg}\n            </div>\n          </div>\n          <div className=\"py-2\">\n            <div className=\"grid grid-cols-2 gap-1\">\n              <div className=\"text-center sm:text-left whitespace-nowrap\">\n                <Link to=\"/forgot-password\">\n                  <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                      className=\"w-4 h-4 inline-block align-text-top\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z\"\n                      />\n                    </svg>\n                    <span className=\"inline-block ml-1\">Forgot Password</span>\n                  </button>\n                </Link>\n              </div>\n              <div className=\"text-center sm:text-right  whitespace-nowrap\">\n                <Link to=\"/register\">\n                  <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                    <CreateOutlined style={{ fontSize: \"15px\" }} />\n                    <span className=\"inline-block ml-1\">Register</span>\n                  </button>\n                </Link>\n              </div>\n            </div>\n          </div>\n          <div className=\"py-2\">\n            <div className=\"grid grid-cols-2 gap-1\">\n              <Link to=\"/\">\n                <div className=\"text-center sm:text-left whitespace-nowrap\">\n                  <button className=\"transition duration-200 mx-5 px-5 py-4 cursor-pointer font-normal text-sm rounded-lg text-gray-500 hover:bg-gray-200 focus:outline-none focus:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 ring-inset\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                      className=\"w-4 h-4 inline-block align-text-top\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                      />\n                    </svg>\n                    <span className=\"inline-block ml-1\">Back to Home</span>\n                  </button>\n                </div>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}